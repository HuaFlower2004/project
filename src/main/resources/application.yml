spring:
  application:
    name: project

  mail:
    host: smtp.qq.com
    port: 465
    username: 3159140248@qq.com
    password: qwagadoukdvndcce
    properties:
      mail:
        smtp:
          ssl:
            enable: true
  task:
    execution:
      pool:
        core-size: 8
        max-size: 10
        queue-capacity: 25

  servlet:
    multipart:
      max-file-size: 1024MB
      max-request-size: 1024MB

  #数据库
  datasource:
    url: jdbc:mysql://localhost:3306/project?serverTimeZone=UTC&characterEncoding=utf8&useUnicode=true&useSSL=false&allowPublicKeyRetrieval=true
    username: root
    password: mijiajie20040820
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      idle-timeout: 300000
      connection-timeout: 20000
      max-lifetime: 1200000
  #安全认证
  security:
    user:
      name: user
      password: 123456


  #MQ配置
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
    connection-timeout: 1s
    template:
      mandatory: true
      retry:
        enabled: true
        multiplier: 1
        max-attempts: 3
    publisher-confirm-type: correlated
    publisher-returns: true
    listener:
      simple:
        prefetch: 1
        acknowledge-mode: auto
        concurrency: 1
        max-concurrency: 1
    virtual-host: "/"
  #redis配置
  data:
    redis:
      host: localhost
      port: 6379

  #JPA配置
  jpa:
    hibernate:
      ddl-auto: update
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    database-platform: org.hibernate.dialect.MySQL8Dialect
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true
        jdbc:
          batch_size: 1000
          batch_versioned_data: true
          fetch_size: 1000
        order_inserts: true
        order_updates: true
        generate_statistics: true

#解决中文乱码
server:
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true
      force-request: true
      force-response: true
  address: 0.0.0.0
  port: 9090
pagehelper:
  helper-dialect: mysql
  reasonable: true
  support-methods-arguments: true
  params: count=countSql

springdoc:
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
  api-docs:
    path: /v3/api-doc
  group-configs:
    - group: default
      paths-to-match: /**
      packages-to-scan: com.mi.project.controller

knife4j:
  enable: true
  setting:
    language: zh_cn

logging:
  level:
    org:
      hibernate:
#        SQL:
#          DEBUG
        tool:
          hbm2ddl:
            DEBUG
    com.mi.project: DEBUG
    org.springframework.amqp: INFO
    org.hibernate: WARN
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
  file:
    name: logs/point-data-processor.log

#MyBatis配置
mybatis:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.mi.project.entity
  configuration:
    map-underscore-to-camel-case: true
    cache-enabled: true
    lazy-loading-enabled: true
    multiple-result-sets-enabled: true
    use-column-label: true
    use-generated-keys: true
    auto-mapping-behavior: partial
    default-statement-timeout: 30
    default-fetch-size: 100
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
  prometheus:
    metrics:
      export:
        enabled: true

powerline:
  thread:
    pool:
      size: 8  # 可根据服务器配置调整
  region:
    size: 50  # 区域大小
  overlap:
    ratio: 0.1  # 重叠比例
