import{_ as f,r as i,o as y,c as e,d as s,ac as g,F as v,x as p,s as d,e as b,h as o,t as c}from"./index-BirWHe53.js";import{S as k}from"./config-DBxA65oN.js";const m={class:"history-bg"},w={class:"history-card"},B={key:0,class:"loading"},E={key:1},R={class:"history-table"},S=["href"],V=["href"],x={key:1,class:"download-btn",disabled:""},C={key:0,class:"empty"},H={__name:"HistoryView",setup(L){const u=b(),n=i([]),r=i(!1);async function h(){r.value=!0;try{const l=localStorage.getItem("token"),t=await(await fetch(`http://${k}/api/file/list`,{headers:{Authorization:`Bearer ${l}`}})).json();t.code===200?n.value=t.data||[]:d.error(t.message||"获取历史失败")}catch(l){d.error("网络错误"),console.error(l)}finally{r.value=!1}}y(()=>{h()});function _(){u.back()}return(l,a)=>(o(),e("div",m,[s("div",w,[s("div",{class:"history-header"},[s("button",{class:"back-btn",onClick:_},"返回"),a[0]||(a[0]=s("h2",null,"历史文件记录",-1))]),r.value?(o(),e("div",B,"加载中...")):(o(),e("div",E,[s("table",R,[a[1]||(a[1]=s("thead",null,[s("tr",null,[s("th",null,"文件名"),s("th",null,"上传时间"),s("th",null,"操作")])],-1)),s("tbody",null,[(o(!0),e(v,null,p(n.value,t=>(o(),e("tr",{key:t.fileUrl},[s("td",null,c(t.fileName),1),s("td",null,c(t.uploadTime),1),s("td",null,[s("a",{href:t.fileUrl,class:"download-btn"},"下载文件",8,S),t.processResult?(o(),e("a",{key:0,href:t.processResult,class:"download-btn",target:"_blank",download:""},"下载结果",8,V)):(o(),e("button",x,"下载结果"))])]))),128))])]),n.value.length===0?(o(),e("div",C,"暂无历史记录")):g("",!0)]))]),a[2]||(a[2]=s("div",{class:"neon-bg"},[s("div",{class:"neon-light neon-light-1"}),s("div",{class:"neon-light neon-light-2"}),s("div",{class:"neon-light neon-light-3"})],-1))]))}},I=f(H,[["__scopeId","data-v-ad235e61"]]);export{I as default};
